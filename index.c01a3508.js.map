{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,0BAGA,MAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,wBACnCC,YAAaF,SAASC,cAAc,wBAEpCE,UAAWH,SAASC,cAAc,kBASpCG,eAAeC,EAAYC,EAAYC,GACrC,MACMC,EAAU,mDAAmDF,UAAmBC,IAEhFE,QAAiBb,EAAAc,QAAMC,IAAI,4CAAaH,MAKxCI,KAAEA,GAASH,EAEjB,OAAOG,C,CAGT,IAAIC,EAAa,GAejBT,eAAeU,EAASF,IACtB,EAAAG,EAAAC,mBAAkBJ,EAAKK,UACvB,EAAAC,EAAAC,aAAYP,EAAKQ,KAAMR,EAAKS,aAAajB,MAAMgB,IAC7Cf,EAAYQ,EAAYO,GAAME,MAAKV,IACjCE,EAASF,GACTW,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,UACV,GACF,G,CAvBN5B,EAAKC,WAAW4B,iBAAiB,UAEjCvB,eAAwBwB,GACtBA,EAAMC,iBAENhB,EAAaf,EAAKI,YAAY4B,MAM9BhB,QAFmBT,EAAYQ,EAAY,G","sources":["src/js/getBySearch.js"],"sourcesContent":["import axios from 'axios';\nimport { renderPager } from './pagination';\n\nconst refs = {\n  searchForm: document.querySelector('.header-search__form'),\n  searchInput: document.querySelector('.header-search-input'),\n\n  container: document.querySelector('.gallery__set'),\n};\n\nimport { renderFilmsMarkup } from './renderMarkup';\n\nlet currentPage = 1;\n\nlet markup = '';\n\nasync function fetchMovies(inputQuery, currentPage) {\n  const mainUrl = `https://api.themoviedb.org/3/search/movie`;\n  const filters = `?api_key=c3923fa38d2dd62131b577696cc2f23f&query=${inputQuery}&page=${currentPage}`;\n\n  const response = await axios.get(`${mainUrl}${filters}`);\n  // console.log(response);\n\n  // console.log(response.json());\n\n  const { data } = response;\n\n  return data;\n}\n\nlet inputQuery = '';\nrefs.searchForm.addEventListener('submit', onSearch);\n\nasync function onSearch(event) {\n  event.preventDefault();\n\n  inputQuery = refs.searchInput.value;\n\n  // console.log(inputQuery);\n  // fetchMovies(inputQuery, 1);\n  const data = await fetchMovies(inputQuery, 1);\n\n  renderUI(data);\n}\n\nasync function renderUI(data) {\n  renderFilmsMarkup(data.results);\n  renderPager(data.page, data.total_pages, async page => {\n    fetchMovies(inputQuery, page).then(data => {\n      renderUI(data);\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth',\n      });\n    });\n  });\n}\n\nasync function renderMoviesList(pageNumber) {\n  currentPage = pageNumber;\n}\n\n// async function addPagination() {\n//   await fetchMovies(inputQuery, currentPage).then(res => {\n//     totalPages = res.total_pages;\n//     return totalPages;\n//   });\n//   if (totalPages === 0) {\n//     refs.searchErrorNotif.textContent =\n//       'Search result not successful. Enter the correct movie name and try again';\n//     $(#pagination-container).pagination(destroy);\n//     refs.moviesList.innerHTML = ``;\n//     return;\n//   } else if (inputQuery === ``) {\n//     refs.searchErrorNotif.textContent = 'Please enter the name of the movie';\n//     $(#pagination-container).pagination(destroy);\n//     refs.moviesList.innerHTML = ``;\n//     return;\n//   }\n//   refs.searchErrorNotif.textContent = '';\n// }\n"],"names":["$dIxxU","parcelRequire","$3c785cb850a1fe40$var$refs","searchForm","document","querySelector","searchInput","container","async","$3c785cb850a1fe40$var$fetchMovies","inputQuery","currentPage","filters","response","default","get","data","$3c785cb850a1fe40$var$inputQuery","$3c785cb850a1fe40$var$renderUI","$5118m","renderFilmsMarkup","results","$jcFG7","renderPager","page","total_pages","then","window","scrollTo","top","behavior","addEventListener","event","preventDefault","value"],"version":3,"file":"index.c01a3508.js.map"}