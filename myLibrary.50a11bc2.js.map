{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,0BAIA,MAGMC,EAAaC,SAASC,cAAc,mBACpCC,EAAWF,SAASC,cAAc,iBAKxCE,eAAeC,IACbP,EAAAQ,KAAKC,QAAQC,UAAUC,OAAO,mBAE9BT,EAAWQ,UAAUE,IAAI,uBACzBP,EAASK,UAAUC,OAAO,uBAE1B,IACE,MAAME,EAAeC,KAAKC,MAAMC,aAAaC,QAhB7B,gBAkBhBC,QADqBC,QAAQC,IAAIP,EAAaQ,IAAIC,KAGlDtB,EAAAQ,KAAKC,QAAQC,UAAUE,IAAI,kB,CAC3B,MAAOW,GAKP,OAJAC,EAAAC,GAASC,OAAOC,QAAQ,kCACxB3B,EAAAQ,KAAKC,QAAQC,UAAUE,IAAI,wBAC3BZ,EAAAQ,KAAKoB,cAAcC,UAAYC,E,EAlBnC5B,EAAW6B,iBAAiB,QAASxB,GACrCF,EAAS0B,iBAAiB,SA4B1BzB,iBACEN,EAAAQ,KAAKC,QAAQC,UAAUC,OAAO,mBAE9BN,EAASK,UAAUE,IAAI,uBACvBV,EAAWQ,UAAUC,OAAO,uBAE5B,IACE,MAAME,EAAeC,KAAKC,MAAMC,aAAaC,QAzC/B,cA4CdC,QAFqBC,QAAQC,IAAIP,EAAaQ,IAAIC,KAGlDtB,EAAAQ,KAAKC,QAAQC,UAAUE,IAAI,kB,CAC3B,MAAOW,GAIP,OAHAC,EAAAC,GAASC,OAAOC,QAAQ,gCACxB3B,EAAAQ,KAAKC,QAAQC,UAAUE,IAAI,wBAC3BZ,EAAAQ,KAAKoB,cAAcC,UAAYC,E,KApBnC,MAAMA,EAAqB,iUAyB3B,SAASZ,EAAkBc,GACzBhC,EAAAQ,KAAKoB,cAAcC,UAAY,GAE/BG,EACGX,KAAI,EAACY,YAAEA,EAAWC,OAAEA,EAAMC,MAAEA,EAAKC,eAAEA,EAAcC,aAAEA,EAAYC,eAAEA,EAAcC,GAAEA,KAIzE,qCAAqCA,GAAM,sIAHnCN,EACX,kCAAkCA,IAClC,0EAIFE,GAASC,GAAkB,iCACNG,iFAEuBA,mDACNA,KAAMJ,GAASC,GAAkB,iEAC/BG,0DACKA,KAgCrD,SAAmBL,GACjB,MAAMM,EAAM,GAEZ,IAAK,IAAIC,EAAQ,EAAGA,EAAQP,EAAOQ,OAAQD,IAAS,CAClD,MAAME,EAAOC,OAAOC,OAAOX,EAAOO,IAClCD,EAAIM,KAAKH,EAAK,G,CAGhB,MAAMI,EAAY,GAElB,GAAIP,EAAIE,OAAS,EAIf,OAHAK,EAAUD,KAAKN,EAAI,IACnBO,EAAUD,KAAKN,EAAI,IACnBO,EAAUD,KAAK,SACRC,EAAUC,KAAK,MAGxB,OAAOR,EAAIQ,KAAK,K,CAhDVC,CAAUf,IAAW,kGAGqBK,gEACCA,KAC3C,IAAIW,KAAKb,GAAcc,eAAiB,IAAID,KAAKZ,GAAgBa,eAAiB,0FAMrFC,SAAQC,GAAKrD,EAAAQ,KAAKoB,cAAc0B,mBAAmB,YAAaD,I,CAMrE/C,eAAegB,EAAeiC,GAC5B,GAAe,KAAXA,EACF,OAEF,MAAMC,EAAU,UAAUD,6CAC1B,IAGE,aAFuBE,EAAAC,QAAMC,IAAI,+BAAaH,MAE9BI,I,CAChB,MAAOrC,GACPsC,QAAQC,IAAIvC,E,EAwBhBhB,G","sources":["src/js/MyLib.js"],"sourcesContent":["import { refs } from './refs';\nimport axios from 'axios';\nimport Notiflix from 'notiflix';\n\nconst WATCHED_KEY = 'Watched_KEY';\nconst QUEUE_KEY = 'Queue_KEY';\n\nconst btnWatched = document.querySelector('.js-btn-watched');\nconst btnQueue = document.querySelector('.js-btn-queue');\n\nbtnWatched.addEventListener('click', goToWatched);\nbtnQueue.addEventListener('click', goToQueue);\n\nasync function goToWatched() {\n  refs.spinner.classList.remove('visually-hidden');\n\n  btnWatched.classList.add('filter__btn--active');\n  btnQueue.classList.remove('filter__btn--active');\n\n  try {\n    const idFilmsArray = JSON.parse(localStorage.getItem(WATCHED_KEY));\n    const qweqwe = await Promise.all(idFilmsArray.map(fetchMovieById));\n    renderFilmsMarkup(qweqwe);\n\n    refs.spinner.classList.add('visually-hidden');\n  } catch (error) {\n    Notiflix.Notify.failure('Your Watched gallery is empty!');\n    refs.spinner.classList.add('visually-hidden');\n    refs.libgallerySet.innerHTML = nothingPlaceHolder;\n\n    return;\n  }\n}\n\nconst nothingPlaceHolder = `<li style=\"display: flex;align-items: center; justify-content: center;\n width: 100%; height: 592px; background: linear-gradient( 45deg, rgba(108, 9, 9, 0.8267682072829132) 0%,\n rgba(62, 65, 87, 0.83) 50%, rgba(108, 9, 9, 0.83) 100% ); \" > <p style=\"font-size: 48px;\n font-weight: 700\">Nothing added to list</p></li>`;\n\nasync function goToQueue() {\n  refs.spinner.classList.remove('visually-hidden');\n\n  btnQueue.classList.add('filter__btn--active');\n  btnWatched.classList.remove('filter__btn--active');\n\n  try {\n    const idFilmsArray = JSON.parse(localStorage.getItem(QUEUE_KEY));\n    const qweqwe = await Promise.all(idFilmsArray.map(fetchMovieById));\n\n    renderFilmsMarkup(qweqwe);\n    refs.spinner.classList.add('visually-hidden');\n  } catch (error) {\n    Notiflix.Notify.failure('Your Queue gallery is empty!');\n    refs.spinner.classList.add('visually-hidden');\n    refs.libgallerySet.innerHTML = nothingPlaceHolder;\n    return;\n  }\n}\n\nfunction renderFilmsMarkup(films) {\n  refs.libgallerySet.innerHTML = '';\n\n  films\n    .map(({ poster_path, genres, title, original_title, release_date, first_air_date, id }) => {\n      const poster = poster_path\n        ? `https://image.tmdb.org/t/p/w400${poster_path}`\n        : `https://image.tmdb.org/t/p/w400/uc4RAVW1T3T29h6OQdr7zu4Blui.jpg`;\n      return `<li class=\"gallery__item\" data-id=${id || `No ID`}>\n                <div class=\"films__img\">\n                    <img class=\"poster\" src=https://image.tmdb.org/t/p/original${poster} alt=\"${\n        title || original_title || 'No title'\n      }\" loading=\"lazy\" id=${id}>\n                </div>\n                <div class=\"film__description\" id=${id}>\n                  <p class=\"film__title\" id=${id}>${title || original_title || 'No title'}</p>\n                  <div class=\"films__meta\" id=${id}>\n                    <span class=\"films__genres\" id=${id}>${\n        getGenres(genres) || 'No genres info'\n      }</span>\n                    \n                    <span class=\"films__sep\" id=${id}>|</span>\n                    <span class=\"films__data\" id=${id}>${\n        new Date(release_date).getFullYear() || new Date(first_air_date).getFullYear() || 'No info'\n      }</span>\n                  </div>\n                </div>\n            </li>`;\n    })\n    .forEach(c => refs.libgallerySet.insertAdjacentHTML('beforeend', c));\n}\n\nconst API_KEY = 'c3923fa38d2dd62131b577696cc2f23f';\nconst mainUrl = 'https://api.themoviedb.org/3';\n\nasync function fetchMovieById(filmId) {\n  if (filmId === '') {\n    return;\n  }\n  const filters = `/movie/${filmId}?api_key=${API_KEY}`;\n  try {\n    const response = await axios.get(`${mainUrl}${filters}`);\n\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction getGenres(genres) {\n  const arr = [];\n\n  for (let index = 0; index < genres.length; index++) {\n    const name = Object.values(genres[index]);\n    arr.push(name[1]);\n  }\n\n  const ArrToJoin = [];\n\n  if (arr.length > 3) {\n    ArrToJoin.push(arr[0]);\n    ArrToJoin.push(arr[1]);\n    ArrToJoin.push('Other');\n    return ArrToJoin.join(', ');\n  }\n\n  return arr.join(', ');\n}\n\ngoToWatched();\n"],"names":["$4Nugj","parcelRequire","$c08bbb6f65cb69b0$var$btnWatched","document","querySelector","$c08bbb6f65cb69b0$var$btnQueue","async","$c08bbb6f65cb69b0$var$goToWatched","refs","spinner","classList","remove","add","idFilmsArray","JSON","parse","localStorage","getItem","$c08bbb6f65cb69b0$var$renderFilmsMarkup","Promise","all","map","$c08bbb6f65cb69b0$var$fetchMovieById","error","$parcel$interopDefault","$iU1Pc","Notify","failure","libgallerySet","innerHTML","$c08bbb6f65cb69b0$var$nothingPlaceHolder","addEventListener","films","poster_path","genres","title","original_title","release_date","first_air_date","id","arr","index","length","name","Object","values","push","ArrToJoin","join","$c08bbb6f65cb69b0$var$getGenres","Date","getFullYear","forEach","c","insertAdjacentHTML","filmId","filters","$dIxxU","default","get","data","console","log"],"version":3,"file":"myLibrary.50a11bc2.js.map"}