{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,oDAGMC,EAAO,CACXC,WAAYC,SAASC,cAAc,wBACnCC,YAAaF,SAASC,cAAc,wBAEpCE,UAAWH,SAASC,cAAc,kB,SASrBG,EAAYC,EAAYC,G,OAAxBC,EAAWC,MAAAC,KAAAC,U,UAAXH,I,OAAAA,EAAfI,EAAAf,EAAA,CAAAe,EAAAC,GAAAC,MAAA,SAAAC,EAA2BT,EAAYC,G,IAE/BS,EAEAC,EAKEC,E,wEARS,4CACXF,EAAU,mDAAsEG,OAAnBb,EAAW,UAAoBa,OAAZZ,G,SAE/Da,EAAAC,QAAMC,IAAI,GAAaH,OAH7B,6CAGqCA,OAARH,I,cAAxCC,EAAQM,EAAAC,KAKRN,EAAWD,EAATC,K,kBAEDA,G,4CAXiBT,MAAAC,KAAAC,U,CAc1B,IAAIc,EAAa,G,SAGFC,I,OAAAA,EAAfd,EAAAf,EAAA,CAAAe,EAAAC,GAAAC,MAAA,SAAAC,EAAwBY,G,yEACtBA,EAAMC,iBAENH,EAAa1B,EAAKI,YAAY0B,M,SAIXxB,EAAYoB,EAAY,G,OAE3CK,EAFUP,EAAAC,M,4CAPWf,MAAAC,KAAAC,U,UAYRmB,EAASC,G,OAATC,EAAQvB,MAAAC,KAAAC,U,UAARqB,I,OAAAA,EAAfpB,EAAAf,EAAA,CAAAe,EAAAC,GAAAC,MAAA,SAAAmB,EAAwBF,G,mEACtB,EAAAG,EAAAC,mBAAkBJ,EAAKK,UACvB,EAAAC,EAAAC,aAAYP,EAAKQ,KAAMR,EAAKS,YAAW,W,MAAE5B,EAAAf,EAAA,CAAAe,EAAAC,GAAAC,MAAA,SAAAC,EAAMwB,G,kEAC7ClC,EAAYoB,EAAYc,GAAME,MAAK,SAAAvB,GACjCY,EAASZ,GACTwB,OAAOC,SAAS,CACdC,IAAK,EACLC,SAAU,U,+DAL+BN,G,gCAAR,I,2CAF1BP,EAAQvB,MAAAC,KAAAC,U,CAdvBZ,EAAKC,WAAW8C,iBAAiB,U,SAETnB,G,OAATD,EAAQjB,MAAAC,KAAAC,U","sources":["src/js/getBySearch.js"],"sourcesContent":["import axios from 'axios';\nimport { renderPager } from './pagination';\n\nconst refs = {\n  searchForm: document.querySelector('.header-search__form'),\n  searchInput: document.querySelector('.header-search-input'),\n\n  container: document.querySelector('.gallery__set'),\n};\n\nimport { renderFilmsMarkup } from './renderMarkup';\n\nlet currentPage = 1;\n\nlet markup = '';\n\nasync function fetchMovies(inputQuery, currentPage) {\n  const mainUrl = `https://api.themoviedb.org/3/search/movie`;\n  const filters = `?api_key=c3923fa38d2dd62131b577696cc2f23f&query=${inputQuery}&page=${currentPage}`;\n\n  const response = await axios.get(`${mainUrl}${filters}`);\n  // console.log(response);\n\n  // console.log(response.json());\n\n  const { data } = response;\n\n  return data;\n}\n\nlet inputQuery = '';\nrefs.searchForm.addEventListener('submit', onSearch);\n\nasync function onSearch(event) {\n  event.preventDefault();\n\n  inputQuery = refs.searchInput.value;\n\n  // console.log(inputQuery);\n  // fetchMovies(inputQuery, 1);\n  const data = await fetchMovies(inputQuery, 1);\n\n  renderUI(data);\n}\n\nasync function renderUI(data) {\n  renderFilmsMarkup(data.results);\n  renderPager(data.page, data.total_pages, async page => {\n    fetchMovies(inputQuery, page).then(data => {\n      renderUI(data);\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth',\n      });\n    });\n  });\n}\n\nasync function renderMoviesList(pageNumber) {\n  currentPage = pageNumber;\n}\n\n// async function addPagination() {\n//   await fetchMovies(inputQuery, currentPage).then(res => {\n//     totalPages = res.total_pages;\n//     return totalPages;\n//   });\n//   if (totalPages === 0) {\n//     refs.searchErrorNotif.textContent =\n//       'Search result not successful. Enter the correct movie name and try again';\n//     $(#pagination-container).pagination(destroy);\n//     refs.moviesList.innerHTML = ``;\n//     return;\n//   } else if (inputQuery === ``) {\n//     refs.searchErrorNotif.textContent = 'Please enter the name of the movie';\n//     $(#pagination-container).pagination(destroy);\n//     refs.moviesList.innerHTML = ``;\n//     return;\n//   }\n//   refs.searchErrorNotif.textContent = '';\n// }\n"],"names":["$bpxeT","parcelRequire","$3c785cb850a1fe40$var$refs","searchForm","document","querySelector","searchInput","container","$3c785cb850a1fe40$var$fetchMovies","inputQuery1","currentPage1","$3c785cb850a1fe40$var$_fetchMovies","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","filters","response","data","concat","$dIxxU","default","get","_ctx","sent","$3c785cb850a1fe40$var$inputQuery","$3c785cb850a1fe40$var$_onSearch","event","preventDefault","value","$3c785cb850a1fe40$var$renderUI","data1","$3c785cb850a1fe40$var$_renderUI","_callee1","$5118m","renderFilmsMarkup","results","$jcFG7","renderPager","page","total_pages","then","window","scrollTo","top","behavior","addEventListener"],"version":3,"file":"index.aa8f5c9e.js.map"}